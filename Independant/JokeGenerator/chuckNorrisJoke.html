<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-171296891-1"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'UA-171296891-1');
		</script>
		
		
		
	<!-- google tag manager -->
		
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-P6FCZRH');</script>
	<!-- End Google Tag Manager -->    
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" type="text/css" href="./styles.css">
    <link rel="stylesheet" type="text/css" href="./nav-bar.css">

    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>Chuck Norris Jokes</title>
  </head>
  <body>

    <!-- 		google tag manager -->
		
		<!-- Google Tag Manager (noscript) -->
		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P6FCZRH"
		height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
		<!-- End Google Tag Manager (noscript) -->
    
    <div class="topnav" id="myTopnav">
      <a href="./chuckNorrisJoke.html" class="active">Chuck Norris Jokes</a>	   
      <a href="./oneJoke.html" >One Joke</a>
      <a href="./tenJokes.html">Ten Jokes</a>
      <a href="./tenJokesProgramming.html">Programming Jokes</a>
      <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <i class="fa fa-bars"></i>
      </a>
    </div>


    <script>
    function myFunction() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }
    </script>




    <script type="text/javascript">

      function fetchJoke(){
      const promise = $.ajax({
        url: "https://api.chucknorris.io/jokes/random",
        type: "GET"
      })
      return promise;
    }

    async function asyncCall() {
      console.log('calling');
      const result = await fetchJoke();
      console.log(result);
      document.getElementById("value").innerHTML = result.value;
      var img = document.getElementById("joke-image");
      img.src = result.icon_url;
      // document.getElementById('body').appendChild(img);

    }
    asyncCall();

    </script>



    <h1 id="jokes-header">Chuck Norris Joke Generator</h1>

    <ul id="jokesList">
      <li>
        <img id="joke-image" src="https://assets.chucknorris.host/img/avatar/chuck-norris.png" alt="">
      </li>
      <li id="value" class="joke-punchline"></li>

    </ul>

    <button id="more-jokes" onClick="window.location.reload();">Another One!</button>
    <h4 id="jokes-footer" ><a href="https://api.chucknorris.io/"> Jokes from: https://api.chucknorris.io/</a></h4>

  </body>
</html>
